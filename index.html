<!DOCTYPE html>
<html lang="en">
  <body>
    <head>
      <link
    rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
  />
      <link href='https://fonts.googleapis.com/css?family=Orbitron' rel='stylesheet' type='text/css'/>
      <title>Random Password Generator</title>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js">
    </script>
	    
	    <script>
	    let numInput = document.getElementById("numInput");
let passwordOutput = document.getElementById("password");
let copyPassword = document.getElementById("copyPassword");
const globalCharacters = [['A','B', 'C', 'D', 'E', 'F', 'G','H', 'I','J', 'K','L', 'M', 'N', 'O','P','Q','R','S', 'T','U','V', 'W','X', 'Y','Z' ], ['a', 'b','c','d','e', 'f','g','h','i','j','k','l','m','n','o', 'p','q','r','s','t','u','v', 'w',  'x',  'y','z' ],["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"], ["!", "~", "#", "$", "%", "^", "&", "*", "(", ")", "-", "_"]];


let createRandomPassword = (pwLength) => {

  let upperCaseCheck = document.getElementById("upperCaseCheck");
  let lowerCaseCheck = document.getElementById("lowerCaseCheck");
  let symbolCheck = document.getElementById("symbolCheck");
  let numberCheck = document.getElementById("numberCheck");
  
  const characters = [['A','B', 'C', 'D', 'E', 'F', 'G','H', 'I','J', 'K','L', 'M', 'N', 'O','P','Q','R','S', 'T','U','V', 'W','X', 'Y','Z' ], ['a', 'b','c','d','e', 'f','g','h','i','j','k','l','m','n','o', 'p','q','r','s','t','u','v', 'w',  'x',  'y','z' ],["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"], ["!", "~", "#", "$", "%", "^", "&", "*", "(", ")", "-", "_"]];
  
const newPasswordArr = [];
let currentArrIndex;
let charsInUpperArr = 0;
let charsInLowerArr = 0;
let charsInNumbersArr = 0;
let charsInSymbolArr = 0;
  
  function createPw() {
    
    
    
  //Checks which options are selected and removes the appropriate subarrays in the characters array based on the check boxes.  
  upperCaseCheck.checked === false ? characters[0].splice(0) : null;
  lowerCaseCheck.checked === false ? characters[1].splice(0) : null;
  numberCheck.checked === false ? characters[2].splice(0) : null;
  symbolCheck.checked === false ? characters[3].splice(0) : null;
    
for (let i = 1; i <= pwLength; i++) {

  //currentArrIndex is a random number between 0 and the length of the characters array.
   currentArrIndex = Math.floor(Math.random() * characters.length)
  //Selects a random character from a random array in the characters array and pushes it into the newCharacterArr array.
  newPasswordArr.push(characters[currentArrIndex][Math.floor(Math.random() * characters[currentArrIndex].length)]);
  //If the loop tries to push something from an empty subarray of the characters array, the code below removes that undefined item.
  if (newPasswordArr[newPasswordArr.length-1] === undefined) {
  newPasswordArr.pop();
    i--;
  }
  //Code below keeps track of how many items from each subarray of the characters array are in the new password array.
  characters[0].length > 0 && characters[0].includes(newPasswordArr[newPasswordArr.length-1]) ? charsInUpperArr++ : null;
  characters[1].length > 0 && characters[1].includes(newPasswordArr[newPasswordArr.length-1]) ? charsInLowerArr++ : null;
  characters[2].length > 0 && characters[2].includes(newPasswordArr[newPasswordArr.length-1]) ? charsInNumbersArr++ : null;
  characters[3].length > 0 && characters[3].includes(newPasswordArr[newPasswordArr.length-1]) ? charsInSymbolArr++ : null;
  if (i === parseInt(pwLength)) {
    if (charsInUpperArr === 0 && characters[0].length > 0) {
charsInUpperArr = 0;
charsInLowerArr = 0;
charsInNumbersArr = 0;
charsInSymbolArr = 0; 
newPasswordArr.splice(0);
i = 0;
    }
    else if (charsInLowerArr === 0 && characters[1].length > 0) {
charsInUpperArr = 0;
charsInLowerArr = 0;
charsInNumbersArr = 0;
charsInSymbolArr = 0; 
newPasswordArr.splice(0);
i = 0;
    }
    else if (charsInNumbersArr === 0 && characters[2].length > 0) {
charsInUpperArr = 0;
charsInLowerArr = 0;
charsInNumbersArr = 0;
charsInSymbolArr = 0; 
newPasswordArr.splice(0);
i = 0;
    }
   else if (charsInSymbolArr === 0 && characters[3].length > 0) {
charsInUpperArr = 0;
charsInLowerArr = 0;
charsInNumbersArr = 0;
charsInSymbolArr = 0; 
newPasswordArr.splice(0);
i = 0;
    }
  }
}
}
  createPw();
  if (pwLength < 6) {
    copyPassword.style.visibility = "hidden";
    passwordDiv.style.visibility = "visible";
    passwordOutput.innerHTML = "Password it too short. Must be minimum of 6 characters.";
  }
   else if (pwLength > 100) {
     copyPassword.style.visibility = "hidden";
     passwordDiv.style.visibility = "visible";
    passwordOutput.innerHTML = "Password is too long. Must be no more than 100 characters."; 
  }
else {
  copyPassword.style.visibility = "visible";
  passwordDiv.style.visibility = "visible";
  passwordOutput.innerHTML = newPasswordArr.join("");
  charsInUpperArr = 0;
  charsInLowerArr = 0;
  charsInNumbersArr = 0;
  charsInSymbolArr = 0; 
  newPasswordArr.splice(0);
  characters.splice(0);
  characters.push(...globalCharacters);
}
}

const copyPass = () => {
navigator.clipboard.writeText(passwordOutput.innerHTML);
}

	    </script>
	    
	    <style> 
		    .text {
  color: white;
  display: inline-block;
  margin-top: 7px;
  margin-bottom: 7px;
}
#pwGeneratorContainer {
  border-radius: 3%;
  width: 40em;
  min-height: 25em;
  height: auto;
  background-color: gray;
  margin: auto;
  text-align: center; 
}
#title {
  margin-top: 5px;
  margin-bottom: 5px;
}
#numInputTag {
  display: block;
  margin-top: 5px;
  margin-bottom: 5px;
}
#passwordDiv {
  display: inline-block;
  border: 5px solid blue;
  background-color: white;
  min-width: 10em;
  max-width: 98.3%;
  height: auto;
  margin: auto;
  visibility: hidden;
  cursor: pointer;
}
#password {
  margin: 0;
  padding: 0;
  font-size: 12vh;
  overflow-wrap: break-word;
}
#copyPassword {
  margin: auto;
  position: absolute;
  visibility: hidden;
  cursor: pointer;
}
#instructions {
  margin-left: 10px;
  margin-right: 10px;
}
#unorderedList {
  text-align: left;
}
#numInput {
  width: 3em;
  height: 2em;
  display: block;
  margin: auto;
}
.checks {
  display: inline-block;
  margin: auto;
  margin-left: 5px;
  margin-right: 15px;
  margin-top: 1em;
}
		    
	    </style>
	    
	    
    </head>
<div id="pwGeneratorContainer">
  <h1 id="title" class="text">Random Password Generator</h1>
  <p id="instructions" class="text">Select below how many characters long you want your password to be. By default it will include at least one the following:</p>
  <ul id="unorderedList" class="text">
    <li>1 Uppercase Letter</li>
    <li>1 Lowercase Letter</li>
    <li>1 Number</li>
    <li>1 Special Character</li>
  </ul><br>
  <div id="passwordDiv">
    <h2 id="password"></h2>
  </div>
  <button id="copyPassword" onclick="copyPass()">Copy</button>
  <h2 class="text" id="numInputTag">Password Length</h2>
  <input type="number" id="numInput" onChange="createRandomPassword(numInput.value)" value ="10"></input>
    <h3 class="text">Uppercase</h3><input type="checkbox" id="upperCaseCheck" class="checks" checked></input>
  <h3 class="text">Lowercase</h3><input type="checkbox" class="checks" id="lowerCaseCheck" checked></input>
<h3 class="text">Symbols</h3><input type="checkbox" class="checks" id="symbolCheck" checked></input>
<h3 class="text">Numbers</h3><input type="checkbox" class="checks" id="numberCheck" checked></input>
    </div>
  </body>
</html>
